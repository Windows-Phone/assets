require.config({baseUrl:"//cdn.support.services.microsoft.com/support-web-sdk/v2/latest",paths:{MsSupportSdk:"support.sdk.all"},config:{app:{appConfig:{env:"PRODUCTION",partnerId:"devcenter",appId:"support-portal"},issueConfig:{product:"WindowsDevCenter",issue:void 0,language:void 0,country:void 0},chatConfig:{}}}}),define("app",["require","MsSupportSdk","module"],function(a,b,c){"use strict";function d(){$("#subcategorySelect, #issueTypeSelect").css("width","100%"),q.css({"pointer-events":"none"})}function e(){o.last().remove()}function f(){H=window.location.pathname.split("/").filter(Boolean)[0].toLocaleLowerCase();var a=H.split("-");c.config().issueConfig.language=a[0],c.config().issueConfig.country=a[1]}function g(){n.on("change",function(){var a=this.value,b=$(this).find(":selected").data("subcategory");J.updateButtonUi(y,[j,k,v,u,s]),l.prop("selectedIndex",0),b?J.filterSubCategory(a):a!==x&&J.renderButtonControl(a)}),l.on("change",function(){var a=this.value;a!==x?J.renderButtonControl(a):J.updateButtonUi(y,[k,v,u])}),p.on("click",function(){var a=window.msCommonShell.meControlOptions().userData,b=a.idp,d=a.firstName+" "+a.lastName,e=a.memberName;return window.msCommonShell.AuthState.NotSignedIn===a.authenticatedState?(J.updateButtonUi(z,[u,v]),void J.updateButtonUi(y,[k])):(c.config().chatConfig.uiInfo={type:G.POPUP,width:G.WIDTH,height:G.HEIGHT},c.config().chatConfig.authInfo={type:b},c.config().chatConfig.surveyType=i.ui.SurveyType.NONE,c.config().chatConfig.context=[{name:"full name",value:d},{name:"email",value:e}],J.updateButtonUi(B,[p]),J.updateButtonUi(y,[q]),void i.ui.chat.render(c.config().chatConfig))})}function h(){i.init(F).then(function(){d(),e(),f(),g()},function(){J.updateButtonUi(z,[s])})}var i=a("MsSupportSdk"),j=$(".subcategoryWrapper"),k=$(".chatBtnWrapper"),l=$("#subcategorySelect"),m=$("#subcategorySelect option"),n=$("#issueTypeSelect"),o=$("#issueTypeSelect option"),p=$(".chatNow"),q=$(".peopleWaiting"),r=$(".queueLength"),s=$(".chatUnavailable"),t=$(".peopleWaiting"),u=$(".signInMessage"),v=$(".chatIncidentBtn"),w="hidden",x="default",y="hide",z="show",A="enabled",B="disabled",C="DevCenterT1",D="DevCenterT2",E={writeEvent:function(a){}},F={logger:E,partnerId:c.config().appConfig.partnerId,appId:c.config().appConfig.appId},G={POPUP:2,WIDTH:360,HEIGHT:480},H=null,I=["en-us"],J={updateButtonUi:function(a,b){switch(a){case"show":$.each(b,function(a,b){b.removeClass(w)});break;case"hide":$.each(b,function(a,b){b.addClass(w)});break;case"disabled":$.each(b,function(a,b){b.addClass(B)});break;case"enabled":$.each(b,function(a,b){b.removeClass(B)})}},filterSubCategory:function(a){m.each(function(){$(this).val()===x||$(this).data("issuetype")===a?$(this).parent().is("span")&&$(this).unwrap():$(this).wrap("<span class='hidden'></span>")}),J.updateButtonUi(z,[j])},initChatModalities:function(){c.config().issueConfig.environment=i.api.modalities.Environment[c.config().appConfig.env],c.config().issueConfig.mode="";var a=i.api.modalities.get(c.config().issueConfig);return a},createChatEvents:function(){return{onUnloaded:function(){J.updateButtonUi(A,[p]),J.updateButtonUi(z,[q])}}},renderButtonControl:function(a){if($.inArray(H,I)===-1)return void J.updateButtonUi(z,[v]);var b=["inAppPurchases","hardwareDeviceDrivers","packageManagement","ageRatings","lobApps","sdkIntegration"],d=d=$.inArray(a,b)!==-1?D:C;c.config().issueConfig.issue=d,J.initChatModalities().then(function(a){c.config().chatConfig=J.createChatEvents(),c.config().chatConfig.modalities=a,$.when(a[0].getAvailability().then(function(a){},function(a){J.updateButtonUi(z,[s])}),a[0].getQueueLength().then(function(a){r.text(a)},function(a){t.hide()})).promise().done(function(){J.updateButtonUi(y,[u]),J.updateButtonUi(z,[k,v])})},function(){J.updateButtonUi(z,[s,v])})}};return{init:h}}),require(["app"],function(a){a.init()});