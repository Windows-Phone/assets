require.config({baseUrl:"//cdn.support.services.microsoft.com/support-web-sdk/v2/latest",paths:{MsSupportSdk:"support.sdk.all"},config:{app:{appConfig:{env:"PRODUCTION",partnerId:"devcenter",appId:"support-portal"},issueConfig:{product:"WindowsDevCenter",issue:void 0,language:void 0,country:void 0},chatConfig:{}}}}),define("app",["require","MsSupportSdk","module"],function(a,b,c){"use strict";function d(){var a=[r,n,p,q];$.each(a,function(a,b){b.css("width","100%")})}function e(){O=window.location.pathname.split("/").filter(Boolean)[0].toLocaleLowerCase();var a=O.split("-");c.config().issueConfig.language=a[0],c.config().issueConfig.country=a[1]}function f(){R.watchSupportTopicSelect(),R.watchIssueTypeSelect(),R.watchHardwareIssueTypeSelect(),R.watchSubcategorySelect(),R.watchChatNowButton()}function g(){h.init(M).then(function(){d(),e(),f()})}var h=a("MsSupportSdk"),i=$(".issueTypeWrapper"),j=$(".subcategoryWrapper"),k=$(".contactMethodWrapper"),l=$(".liveChatWrapper"),m=$(".incidentWrapper"),n=$("#subcategorySelect"),o=$("#subcategorySelect option"),p=$("#issueTypeSelect"),q=$("#hardwareIssueTypeSelect"),r=$("#supportTopicSelect"),s=$(".chatNow"),t=$(".peopleWaiting"),u=$(".queueLength"),v=$(".chatUnavailable"),w=$(".signInMessage"),x=$(".incidentHref"),y="x-hidden",z="default",A="hide",B="show",C="enabled",D="disabled",E="issuetype",F="incidentUrl",G="topic",H=":selected",I="hardware",J="DevCenterT1",K="DevCenterT2",L={writeEvent:function(a){}},M={logger:L,partnerId:c.config().appConfig.partnerId,appId:c.config().appConfig.appId},N={POPUP:2,WIDTH:360,HEIGHT:480},O=null,P=null,Q=["en-us"],R={updateButtonUi:function(a,b){switch(a){case"show":$.each(b,function(a,b){b.removeClass(y)});break;case"hide":$.each(b,function(a,b){b.addClass(y)});break;case"disabled":$.each(b,function(a,b){b.attr("aria-disabled","true"),b.css("pointer-events","none")});break;case"enabled":$.each(b,function(a,b){b.attr("aria-disabled","false"),b.css("pointer-events","auto")})}},filterSubCategory:function(a){o.each(function(){$(this).val()!==z&&($(this).parent().is("span")&&$(this).unwrap(),$(this).data(E)!==a&&$(this).wrap("<span class='x-hidden'></span>"))}),R.updateButtonUi(B,[j])},initChatModalities:function(){c.config().issueConfig.environment=h.api.modalities.Environment[c.config().appConfig.env],c.config().issueConfig.mode="";var a=h.api.modalities.get(c.config().issueConfig);return a},createChatEvents:function(){return{onUnloaded:function(){R.updateButtonUi(C,[s]),R.updateButtonUi(B,[t])}}},renderButtonControl:function(a,b){if($.inArray(O,Q)===-1)return void R.updateButtonUi(B,[k,m]);if(x.attr("href",b),"appCertificationFailures"===a||P===I)return void R.updateButtonUi(B,[k,m]);var d=["inAppPurchases","packageManagement","ageRatings","lobApps","sdkIntegration","collaborate","hardwareDriversOrIot"],e=$.inArray(a,d)!==-1?K:J;c.config().issueConfig.issue=e,R.initChatModalities().then(function(a){c.config().chatConfig=R.createChatEvents(),c.config().chatConfig.modalities=a,$.when(a[0].getAvailability().then(function(a){},function(a){R.updateButtonUi(B,[v])}),a[0].getQueueLength().then(function(a){u.text(a)},function(a){t.hide()})).promise().done(function(){R.updateButtonUi(A,[w])})},function(){R.updateButtonUi(B,[v])}),R.updateButtonUi(B,[k,l,m])},displayIssueTypeSelectElement:function(a){a===I?(p.addClass(y),q.removeClass(y)):(p.removeClass(y),q.addClass(y))},render:function(a){var b=a.value,c=$(a).find(H).data("subcategory"),d=$(a).find(H).data("supportUrl");R.updateButtonUi(A,[j,k,l,m,w,v]),n.prop("selectedIndex",0),R.updateButtonUi(C,[s]),R.updateButtonUi(B,[t]),c?R.filterSubCategory(b):b===z||c||R.renderButtonControl(b,d)},watchSupportTopicSelect:function(){r.on("change",function(){var a=this.value,b=$(this).find(H).data(E),c=$(this).find(H).data(F),d=$(this).find(H).data(G);return P=d,R.updateButtonUi(A,[i,j,k,l,m,w,v]),p.prop("selectedIndex",0),q.prop("selectedIndex",0),R.updateButtonUi(C,[s]),R.updateButtonUi(B,[t]),x.attr("href",c),"en-us"!==O?(a!==z&&R.updateButtonUi(B,[k,m]),void R.updateButtonUi(y,[k,m])):void(b?(R.displayIssueTypeSelectElement(d),R.updateButtonUi(B,[i])):a!==z&&R.updateButtonUi(B,[k,m]))})},watchIssueTypeSelect:function(){p.on("change",function(){var a=this;R.render(a)})},watchHardwareIssueTypeSelect:function(){q.on("change",function(){var a=this;R.render(a)})},watchSubcategorySelect:function(){n.on("change",function(){var a=this.value,b=$(this).find(H).data("supportUrl");R.updateButtonUi(C,[s]),R.updateButtonUi(B,[t]),a!==z?R.renderButtonControl(a,b):R.updateButtonUi(A,[k,l,m,w])})},watchChatNowButton:function(){s.on("click",function(a){a.preventDefault();var b=window.msCommonShell.meControlOptions().userData,d=b.idp,e=b.firstName+" "+b.lastName,f=b.memberName;return window.msCommonShell.AuthState.NotSignedIn===b.authenticatedState?void R.updateButtonUi(B,[w]):(c.config().chatConfig.uiInfo={type:N.POPUP,width:N.WIDTH,height:N.HEIGHT},c.config().chatConfig.authInfo={type:d},c.config().chatConfig.surveyType=h.ui.SurveyType.NONE,c.config().chatConfig.context=[{name:"full name",value:e},{name:"email",value:f}],R.updateButtonUi(D,[s]),R.updateButtonUi(A,[t]),void h.ui.chat.render(c.config().chatConfig))})}};return{init:g}}),require(["app"],function(a){a.init()});