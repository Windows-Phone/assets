require.config({baseUrl:"//cdn.support.services.microsoft.com/support-web-sdk/v2/latest",paths:{MsSupportSdk:"support.sdk.all"},config:{app:{appConfig:{env:"PRODUCTION",partnerId:"devcenter",appId:"support-portal"},issueConfig:{product:"WindowsDevCenter",issue:void 0,language:void 0,country:void 0},chatConfig:{}}}}),define("app",["require","MsSupportSdk","module"],function(a,b,c){"use strict";function d(){T=W.detectBrowserLanguage(),$.inArray(T,V)!==-1&&A.removeClass(B)}function e(){var a=[t,p,r,s];$.each(a,function(a,b){b.css("width","100%")})}function f(){R=window.location.pathname.split("/").filter(Boolean)[0].toLocaleLowerCase();var a=R.split("-");c.config().issueConfig.language=a[0],c.config().issueConfig.country=a[1]}function g(){W.watchSupportTopicSelect(),W.watchIssueTypeSelect(),W.watchHardwareIssueTypeSelect(),W.watchSubcategorySelect(),W.watchChatNowButton()}function h(){i.init(P).then(function(){d(),e(),f(),g()})}var i=a("MsSupportSdk"),j=$(".issueTypeWrapper"),k=$(".subcategoryWrapper"),l=$(".contactMethodWrapper"),m=$(".liveChatWrapper"),n=$(".incidentWrapper"),o=$(".customWrapper"),p=$("#subcategorySelect"),q=$("#subcategorySelect option"),r=$("#issueTypeSelect"),s=$("#hardwareIssueTypeSelect"),t=$("#supportTopicSelect"),u=$(".chatNow"),v=$(".peopleWaiting"),w=$(".queueLength"),x=$(".chatUnavailable"),y=$(".signInMessage"),z=$(".incidentHref"),A=$(".optionViewable"),B="x-hidden",C="default",D="hide",E="show",F="enabled",G="disabled",H="issuetype",I="incidentUrl",J="topic",K=":selected",L="hardware",M="DevCenterT1",N="DevCenterT2",O={writeEvent:function(a){}},P={logger:O,partnerId:c.config().appConfig.partnerId,appId:c.config().appConfig.appId},Q={POPUP:2,WIDTH:360,HEIGHT:480},R=null,S=null,T=null,U=["en-us"],V=["en-us","en-ca"],W={detectBrowserLanguage:function(){var a=window.navigator.language.toLowerCase();return a},updateButtonUi:function(a,b){switch(a){case"show":$.each(b,function(a,b){b.removeClass(B)});break;case"hide":$.each(b,function(a,b){b.addClass(B)});break;case"disabled":$.each(b,function(a,b){b.attr("aria-disabled","true"),b.css("pointer-events","none")});break;case"enabled":$.each(b,function(a,b){b.attr("aria-disabled","false"),b.css("pointer-events","auto")})}},filterSubCategory:function(a){q.each(function(){$(this).val()!==C&&($(this).parent().is("span")&&$(this).unwrap(),$(this).data(H)!==a&&$(this).wrap("<span class='x-hidden'></span>"))}),W.updateButtonUi(E,[k])},initChatModalities:function(){c.config().issueConfig.environment=i.api.modalities.Environment[c.config().appConfig.env],c.config().issueConfig.mode="";var a=i.api.modalities.get(c.config().issueConfig);return a},createChatEvents:function(){return{onUnloaded:function(){W.updateButtonUi(F,[u]),W.updateButtonUi(E,[v])}}},renderButtonControl:function(a,b){if($.inArray(R,U)===-1)return void W.updateButtonUi(E,[l,n]);if(z.attr("href",b),"appCertificationFailures"===a||S===L)return void W.updateButtonUi(E,[l,n]);var d=["inAppPurchases","packageManagement","ageRatings","lobApps","sdkIntegration","collaborate","hardwareDriversOrIot"],e=$.inArray(a,d)!==-1?N:M;c.config().issueConfig.issue=e,W.initChatModalities().then(function(a){c.config().chatConfig=W.createChatEvents(),c.config().chatConfig.modalities=a,$.when(a[0].getAvailability().then(function(a){},function(a){W.updateButtonUi(E,[x])}),a[0].getQueueLength().then(function(a){w.text(a)},function(a){v.hide()})).promise().done(function(){W.updateButtonUi(D,[y])})},function(){W.updateButtonUi(E,[x])}),W.updateButtonUi(E,[l,m,n])},displayIssueTypeSelectElement:function(a){a===L?(r.addClass(B),s.removeClass(B)):(r.removeClass(B),s.addClass(B))},render:function(a){var b=a.value,c=$(a).find(K).data("subcategory"),d=$(a).find(K).data("supportUrl");W.updateButtonUi(D,[k,l,m,n,y,x]),p.prop("selectedIndex",0),W.updateButtonUi(F,[u]),W.updateButtonUi(E,[v]),c?W.filterSubCategory(b):b===C||c||W.renderButtonControl(b,d)},watchSupportTopicSelect:function(){t.on("change",function(){var a=this.value,b=$(this).find(K).data(H),c=$(this).find(K).data(I),d=$(this).find(K).data(J);return S=d,W.updateButtonUi(D,[j,k,l,m,n,o,y,x]),r.prop("selectedIndex",0),s.prop("selectedIndex",0),W.updateButtonUi(F,[u]),W.updateButtonUi(E,[v]),z.attr("href",c),"en-us"!==R?(a!==C&&W.updateButtonUi(E,[l,n]),void W.updateButtonUi(B,[l,n])):void(b?(W.displayIssueTypeSelectElement(d),W.updateButtonUi(E,[j])):"viewable"===a?W.updateButtonUi(E,[o]):a!==C&&W.updateButtonUi(E,[l,n]))})},watchIssueTypeSelect:function(){r.on("change",function(){var a=this;W.render(a)})},watchHardwareIssueTypeSelect:function(){s.on("change",function(){var a=this;W.render(a)})},watchSubcategorySelect:function(){p.on("change",function(){var a=this.value,b=$(this).find(K).data("supportUrl");W.updateButtonUi(F,[u]),W.updateButtonUi(E,[v]),a!==C?W.renderButtonControl(a,b):W.updateButtonUi(D,[l,m,n,y])})},watchChatNowButton:function(){u.on("click",function(a){a.preventDefault();var b=window.msCommonShell.meControlOptions().userData,d=b.idp,e=b.firstName+" "+b.lastName,f=b.memberName;return window.msCommonShell.AuthState.NotSignedIn===b.authenticatedState?void W.updateButtonUi(E,[y]):(c.config().chatConfig.uiInfo={type:Q.POPUP,width:Q.WIDTH,height:Q.HEIGHT},c.config().chatConfig.authInfo={type:d},c.config().chatConfig.surveyType=i.ui.SurveyType.NONE,c.config().chatConfig.context=[{name:"full name",value:e},{name:"email",value:f}],W.updateButtonUi(G,[u]),W.updateButtonUi(D,[v]),void i.ui.chat.render(c.config().chatConfig))})}};return{init:h}}),require(["app"],function(a){a.init()});