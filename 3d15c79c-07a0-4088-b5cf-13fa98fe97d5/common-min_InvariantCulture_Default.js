var Wdc=Wdc===undefined?{}:Wdc;Wdc.Cpub=Wdc.Cpub===undefined?{}:Wdc.Cpub;Wdc.Cpub.Common=Wdc.Cpub.Common===undefined?{}:Wdc.Cpub.Common;(function(){function startVideoWedcs(videoName){MscomCustomEvent("ms.InteractionType","100","ms.video.completionrate","0","cn",videoName+": video started")}function endedVideoWedcs(videoName){MscomCustomEvent("ms.InteractionType","103","ms.video.completionrate","100","cn",videoName)}Wdc.Cpub.Common.InitializeYoutubeVideos=function(){var youtubePlayers=document.getElementsByClassName("yt-player"),youtubePlayerLength=youtubePlayers.length,tag=document.createElement("script");$.getScript("https://www.youtube.com/iframe_api",function(data,textStatus,xhr){textStatus==="success"&&xhr.status===200&&tag.setAttribute("src","https://www.youtube.com/iframe_api")});var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);function getYoutubeImg(src,alt){return "<img class='img-responsive embed-responsive-item' src='"+src+"' alt='"+alt+"'/>"}function setYoutubeIframe(){var videoId=this.parentNode.dataset.id,videoName=this.parentNode.dataset.cn,player;function onYouTubeIframeAPIReady(){player=new YT.Player("player",{videoId:videoId,playerVars:{controls:1,modestbranding:1},events:{onReady:onPlayerReady}})}function onPlayerReady(event){var isReached25=false,isReached50=false,isReached75=false;event.target.playVideo();var duration=player.getDuration();player.addEventListener("onStateChange",function(event){var percentage;if(event.data===1){startVideoWedcs(videoName);var check=setInterval(function(){percentage=(player.getCurrentTime()/duration*100).toFixed(2);if(Math.floor(percentage)>=25&&!isReached25){MscomCustomEvent("ms.InteractionType","101","ms.video.completionrate","25","cn",videoName);isReached25=true}if(Math.floor(percentage)>=50&&!isReached50){MscomCustomEvent("ms.InteractionType","101","ms.video.completionrate","50","cn",videoName);isReached50=true}if(Math.floor(percentage)>=75&&!isReached75){MscomCustomEvent("ms.InteractionType","101","ms.video.completionrate","75","cn",videoName);isReached75=true}},1e3)}if(event.data===0){endedVideoWedcs(videoName);clearInterval(check)}})}onYouTubeIframeAPIReady()}for(var i=0;i<youtubePlayerLength;i++){var divElement=document.getElementById("player");divElement.innerHTML=getYoutubeImg(youtubePlayers[i].dataset.poster,youtubePlayers[i].dataset.alt);divElement.onclick=setYoutubeIframe;youtubePlayers[i].appendChild(divElement)}};Wdc.Cpub.Common.InitializeHtml5Videos=function(){var html5Videos=document.getElementsByTagName("video");function playHtml5Video(){var isEventFired25=false,isEventFired50=false,isEventFired75=false,percentage,duration=this.duration,videoName=this.dataset.cn;startVideoWedcs(videoName);this.ontimeupdate=function(){percentage=(this.currentTime/duration*100).toFixed(2);if(Math.floor(percentage)===25&&!isEventFired25){MscomCustomEvent("ms.InteractionType","101","ms.video.completionrate","25","cn",videoName);isEventFired25=true}if(Math.floor(percentage)===50&&!isEventFired50){MscomCustomEvent("ms.InteractionType","101","ms.video.completionrate","50","cn",videoName);isEventFired50=true}if(Math.floor(percentage)===75&&!isEventFired75){MscomCustomEvent("ms.InteractionType","101","ms.video.completionrate","75","cn",videoName);isEventFired75=true}};this.addEventListener("ended",function(){endedVideoWedcs(videoName)})}for(var i=0;i<html5Videos.length;i++)html5Videos[i].addEventListener("play",playHtml5Video)};Wdc.Cpub.Common.InitializeHtml5VideoOnClick=function(){for(var videoImg=document.getElementsByClassName("video-img"),i=0;i<videoImg.length;i++)videoImg[i].addEventListener("click",function(){var videoElement="<video controls autoplay data-cn='"+this.getAttribute("data-cn")+"'><source src='"+this.getAttribute("data-video")+"' type='video/mp4'>"+this.getAttribute("data-fallback")+"</video>";this.style.display="none";this.parentNode.innerHTML=videoElement;Wdc.Cpub.Common.InitializeHtml5Videos()})}})();$(function(){Wdc.Cpub.Common.InitializeYoutubeVideos();Wdc.Cpub.Common.InitializeHtml5Videos();Wdc.Cpub.Common.InitializeHtml5VideoOnClick()})