require.config({baseUrl:"//cdn.support.services.microsoft.com/support-web-sdk/v2/latest",paths:{MsSupportSdk:"support.sdk.all"},config:{app:{appConfig:{env:"PRODUCTION",partnerId:"devcenter",appId:"support-portal"},issueConfig:{product:"WindowsDevCenter",issue:void 0,language:void 0,country:void 0},chatConfig:{}}}}),define("app",["require","MsSupportSdk","module"],function(a,b,c){"use strict";function d(){$("#subcategorySelect, #issueTypeSelect").css("width","100%"),o.css({"pointer-events":"none"})}function e(){F=window.location.pathname.split("/").filter(Boolean)[0].toLocaleLowerCase();var a=F.split("-");c.config().issueConfig.language=a[0],c.config().issueConfig.country=a[1]}function f(){m.on("change",function(){var a=this.value,b=$(this).find(":selected").data("subcategory");H.updateButtonUi(w,[i,j,t,s,q]),k.prop("selectedIndex",0),b?H.filterSubCategory(a):a!==v&&H.renderButtonControl(a)}),k.on("change",function(){var a=this.value;a!==v?H.renderButtonControl(a):H.updateButtonUi(w,[j,t,s])}),n.on("click",function(){var a=window.msCommonShell.meControlOptions().userData,b=a.idp,d=a.firstName+" "+a.lastName,e=a.memberName;return window.msCommonShell.AuthState.NotSignedIn===a.authenticatedState?(H.updateButtonUi(x,[s,t]),void H.updateButtonUi(w,[j])):(c.config().chatConfig.uiInfo={type:E.POPUP,width:E.WIDTH,height:E.HEIGHT},c.config().chatConfig.authInfo={type:b},c.config().chatConfig.surveyType=h.ui.SurveyType.NONE,c.config().chatConfig.context=[{name:"full name",value:d},{name:"email",value:e}],H.updateButtonUi(z,[n]),H.updateButtonUi(w,[o]),void h.ui.chat.render(c.config().chatConfig))})}function g(){h.init(D).then(function(){d(),e(),f()},function(){H.updateButtonUi(x,[q])})}var h=a("MsSupportSdk"),i=$(".subcategoryWrapper"),j=$(".chatBtnWrapper"),k=$("#subcategorySelect"),l=$("#subcategorySelect option"),m=$("#issueTypeSelect"),n=$(".chatNow"),o=$(".peopleWaiting"),p=$(".queueLength"),q=$(".chatUnavailable"),r=$(".peopleWaiting"),s=$(".signInMessage"),t=$(".chatIncidentBtn"),u="hidden",v="default",w="hide",x="show",y="enabled",z="disabled",A="DevCenterT1",B="DevCenterT2",C={writeEvent:function(a){}},D={logger:C,partnerId:c.config().appConfig.partnerId,appId:c.config().appConfig.appId},E={POPUP:2,WIDTH:360,HEIGHT:480},F=null,G=["en-us"],H={updateButtonUi:function(a,b){switch(a){case"show":$.each(b,function(a,b){b.removeClass(u)});break;case"hide":$.each(b,function(a,b){b.addClass(u)});break;case"disabled":$.each(b,function(a,b){b.addClass(z)});break;case"enabled":$.each(b,function(a,b){b.removeClass(z)})}},filterSubCategory:function(a){l.each(function(){$(this).val()===v||$(this).data("issuetype")===a?$(this).parent().is("span")&&$(this).unwrap():$(this).wrap("<span class='hidden'></span>")}),H.updateButtonUi(x,[i])},initChatModalities:function(){c.config().issueConfig.environment=h.api.modalities.Environment[c.config().appConfig.env],c.config().issueConfig.mode="";var a=h.api.modalities.get(c.config().issueConfig);return a},createChatEvents:function(){return{onUnloaded:function(){H.updateButtonUi(y,[n]),H.updateButtonUi(x,[o])}}},renderButtonControl:function(a){if($.inArray(F,G)===-1)return void H.updateButtonUi(x,[t]);var b=["inAppPurchases","packageManagement","ageRatings","lobApps","sdkIntegration"],d=d=$.inArray(a,b)!==-1?B:A;c.config().issueConfig.issue=d,console.log(c.config().issueConfig),H.initChatModalities().then(function(a){console.log(a),c.config().chatConfig=H.createChatEvents(),c.config().chatConfig.modalities=a,$.when(a[0].getAvailability().then(function(a){},function(a){H.updateButtonUi(x,[q])}),a[0].getQueueLength().then(function(a){p.text(a)},function(a){r.hide()})).promise().done(function(){H.updateButtonUi(w,[s]),H.updateButtonUi(x,[j,t])})},function(){H.updateButtonUi(x,[q,t])})}};return{init:g}}),require(["app"],function(a){a.init()});