var Wdc=Wdc||{};Wdc.Cx=Wdc.Cx||{},Wdc.Cx.Support=Wdc.Cx.Support||{},function(){"use strict";function a(){d.on("click",function(){u.search()}),i.keypress(function(a){13===a.keyCode&&(a.preventDefault(),u.search())})}var b=$(".loc-prev").text(),c=$(".loc-next").text(),d=$(".search-icon"),e=$(".pagination"),f=$(".no-result"),g=$(".result-row"),h=$(".no-result-query"),i=$(".search-query"),j="previous-pagination",k="next-pagination",l="",m="hidden",n="active",o=".pagination .active",p=".previous-pagination",q=".next-pagination",r=".pagination li",s=5,t=window.location.pathname.split("/").filter(Boolean)[0].toLocaleLowerCase(),u={createTable:function(a){$.each(a.ResultSets[0].Results,function(a,b){var c=$("<tr class='item-row'></tr>"),d=$("<td><a target='_blank' href='"+b.Url+"'>"+b.Title+"</a></td>"),e=$("<td>"+b.Description+"</td>"),f=c.append(d).append(e);$("tbody").append(f)})},createPagination:function(a){var d=$("<li class='previous-pagination'><a href='#' aria-label='"+b+"'><span aria-hidden='true'>"+b+"</span></a></li>"),f=$("<li class='next-pagination'><a href='#' aria-label='"+c+"'><span aria-hidden='true'>"+c+"</span></a></li>");e.append(d);for(var g=Math.ceil(a/s),h=1;h<=g;h++){var i=$("<li><a href='#'>"+h+"</a></li>");e.append(i)}e.append(f),d.next().addClass(n)},updateTableUi:function(a){var b=$(".item-row");b.hide(),b.each(function(b){b>=s*(a-1)&&b<s*a&&$(this).show()})},updatePaginationUi:function(){var a=$(o).prev().hasClass(j),b=$(o).next().hasClass(k);a?($(p).hide(),$(q).show()):b?($(q).hide(),$(p).show()):($(p).show(),$(q).show())},paginationClick:function(){$(r).click(function(a){switch(a.preventDefault(),a.currentTarget.className){case j:var b=$(o).prev();$(r).removeClass(n),b.addClass(n),u.updatePaginationUi(),u.updateTableUi(parseInt(b.text()));break;case k:var c=$(o).next();$(r).removeClass(n),c.addClass(n),u.updatePaginationUi(),u.updateTableUi(parseInt(c.text()));break;default:var d=parseInt($(this).text());$(r).removeClass(n),$(this).addClass(n),u.updatePaginationUi(),u.updateTableUi(parseInt(d))}})},pagination:function(a){e.html(l),a<=s||(u.createPagination(a),u.updateTableUi(1),u.updatePaginationUi(),u.paginationClick())},search:function(){var a=i.val();if(a!==l){var b="https://ussearchprod.trafficmanager.net/services/api/us/bingpartnercenter/"+t+"/search?query="+a+"&markets="+t+"&count=30&offset=0";$.ajax({headers:{"X-US-Client":"fa77e94f-10ad-4070-899d-0027d9a0fae3"},url:encodeURI(b),type:"GET",success:function(b){return $("tbody").html(l),0===b.ResultSets[0].Count?(f.removeClass(m),g.addClass(m),void h.text(a)):(u.createTable(b),u.pagination(b.ResultSets[0].Count),f.addClass(m),void g.removeClass(m))}})}}};Wdc.Cx.Support.init=function(){a()}}(),$(function(){Wdc.Cx.Support.init()});