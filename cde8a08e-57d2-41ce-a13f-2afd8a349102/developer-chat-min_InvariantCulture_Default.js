require.config({baseUrl:"//cdn.support.services.microsoft.com/support-web-sdk/v2/latest",paths:{MsSupportSdk:"support.sdk.all"},config:{app:{appConfig:{env:"PRODUCTION",partnerId:"devcenter",appId:"support-portal"},issueConfig:{product:"WindowsDevCenter",issue:void 0,language:void 0,country:void 0},chatConfig:{}}}}),define("app",["require","MsSupportSdk","module"],function(a,b,c){"use strict";function d(){var a=[q,n,p];$.each(a,function(a,b){b.css("width","100%")})}function e(){I=window.location.pathname.split("/").filter(Boolean)[0].toLocaleLowerCase();var a=I.split("-");c.config().issueConfig.language=a[0],c.config().issueConfig.country=a[1]}function f(){K.watchSupportTopicSelect(),K.watchIssueTypeSelect(),K.watchSubcategorySelect(),K.watchChatNowButton()}function g(){h.init(G).then(function(){d(),e(),f()})}var h=a("MsSupportSdk"),i=($(".supportTopicWrapper"),$(".issueTypeWrapper")),j=$(".subcategoryWrapper"),k=$(".contactMethodWrapper"),l=$(".liveChatWrapper"),m=$(".incidentWrapper"),n=$("#subcategorySelect"),o=$("#subcategorySelect option"),p=$("#issueTypeSelect"),q=$("#supportTopicSelect"),r=$(".chatNow"),s=$(".peopleWaiting"),t=$(".queueLength"),u=$(".chatUnavailable"),v=$(".signInMessage"),w=$(".incidentHref"),x="x-hidden",y="default",z="hide",A="show",B="enabled",C="disabled",D="DevCenterT1",E="DevCenterT2",F={writeEvent:function(a){}},G={logger:F,partnerId:c.config().appConfig.partnerId,appId:c.config().appConfig.appId},H={POPUP:2,WIDTH:360,HEIGHT:480},I=null,J=["en-us"],K={updateButtonUi:function(a,b){switch(a){case"show":$.each(b,function(a,b){b.removeClass(x)});break;case"hide":$.each(b,function(a,b){b.addClass(x)});break;case"disabled":$.each(b,function(a,b){b.attr("aria-disabled","true"),b.css("pointer-events","none")});break;case"enabled":$.each(b,function(a,b){b.attr("aria-disabled","false"),b.css("pointer-events","auto")})}},filterSubCategory:function(a){o.each(function(){$(this).val()!==y&&($(this).parent().is("span")&&$(this).unwrap(),$(this).data("issuetype")!==a&&$(this).wrap("<span class='x-hidden'></span>"))}),K.updateButtonUi(A,[j])},initChatModalities:function(){c.config().issueConfig.environment=h.api.modalities.Environment[c.config().appConfig.env],c.config().issueConfig.mode="";var a=h.api.modalities.get(c.config().issueConfig);return a},createChatEvents:function(){return{onUnloaded:function(){K.updateButtonUi(B,[r]),K.updateButtonUi(A,[s])}}},renderButtonControl:function(a){if($.inArray(I,J)===-1)return void K.updateButtonUi(A,[k,m]);K.updateButtonUi(A,[k,l,m]);var b=["inAppPurchases","packageManagement","ageRatings","lobApps","sdkIntegration","collaborate"],d=$.inArray(a,b)!==-1?E:D;c.config().issueConfig.issue=d,K.initChatModalities().then(function(a){c.config().chatConfig=K.createChatEvents(),c.config().chatConfig.modalities=a,$.when(a[0].getAvailability().then(function(a){},function(a){K.updateButtonUi(A,[u])}),a[0].getQueueLength().then(function(a){t.text(a)},function(a){s.hide()})).promise().done(function(){K.updateButtonUi(z,[v])})},function(){K.updateButtonUi(A,[u])})},watchSupportTopicSelect:function(){q.on("change",function(){var a=this.value,b=$(this).find(":selected").data("issuetype"),c=$(this).find(":selected").data("incidentUrl");return K.updateButtonUi(z,[i,j,k,l,m,v,u]),p.prop("selectedIndex",0),K.updateButtonUi(B,[r]),K.updateButtonUi(A,[s]),w.attr("href",c),"en-us"!==I?(a!==y&&K.updateButtonUi(A,[k,m]),void K.updateButtonUi(x,[k,m])):void(b?K.updateButtonUi(A,[i]):a!==y&&K.updateButtonUi(A,[k,m]))})},watchIssueTypeSelect:function(){p.on("change",function(){var a=this.value,b=$(this).find(":selected").data("subcategory");K.updateButtonUi(z,[j,k,l,m,v,u]),n.prop("selectedIndex",0),K.updateButtonUi(B,[r]),K.updateButtonUi(A,[s]),b?K.filterSubCategory(a):a===y||b||K.renderButtonControl(a)})},watchSubcategorySelect:function(){n.on("change",function(){var a=this.value;K.updateButtonUi(B,[r]),K.updateButtonUi(A,[s]),a!==y?K.renderButtonControl(a):K.updateButtonUi(z,[k,l,m,v])})},watchChatNowButton:function(){r.on("click",function(a){a.preventDefault();var b=window.msCommonShell.meControlOptions().userData,d=b.idp,e=b.firstName+" "+b.lastName,f=b.memberName;return window.msCommonShell.AuthState.NotSignedIn===b.authenticatedState?void K.updateButtonUi(A,[v]):(c.config().chatConfig.uiInfo={type:H.POPUP,width:H.WIDTH,height:H.HEIGHT},c.config().chatConfig.authInfo={type:d},c.config().chatConfig.surveyType=h.ui.SurveyType.NONE,c.config().chatConfig.context=[{name:"full name",value:e},{name:"email",value:f}],K.updateButtonUi(C,[r]),K.updateButtonUi(z,[s]),void h.ui.chat.render(c.config().chatConfig))})}};return{init:g}}),require(["app"],function(a){a.init()});