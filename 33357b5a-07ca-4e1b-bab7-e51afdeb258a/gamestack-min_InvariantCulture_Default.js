$((function(){if($("main").hasClass("gs-main")){var getParameterByName=function getParameterByName(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex,results=new RegExp("[\\?&]"+name+"=([^&#]*)").exec(location.search);return null===results?"":decodeURIComponent(results[1].replace(/\+/g," "))},subpageNavDataAttrName="data-gs-subpage-nav",$subpageNav=$("[".concat("data-gs-subpage-nav","]")),navLinkDataAttrName="data-gs-subpage-nav-link",$subpageNavLinks=$("[".concat(navLinkDataAttrName,"]")),subpageLinkDataAttrName="data-gs-subpage-link",subpageDataAttrName="data-gs-subpage",subpageHeaderClass="gs-subpage_header",gsNavCurrentLocationClass="gs-nav-current-location",gsNavExpandedClass="gs-nav--expanded",gsSubpageNavHeightCollapsed=$subpageNav.innerHeight(),$smoothScrollAnchor;$subpageNavLinks.click((function(e){e.preventDefault();var subpageName=$(this).attr(navLinkDataAttrName),isCurrentNavLink=$(this).hasClass("gs-nav-current-location");$subpageNav.removeClass("gs-nav--expanded"),isCurrentNavLink&&$subpageNav.addClass("gs-nav--expanded"),$subpageNavLinks.removeClass("gs-nav-current-location"),$("div[".concat("data-gs-subpage","]")).hide(),$(this).addClass("gs-nav-current-location"),$("div[".concat("data-gs-subpage","=").concat(subpageName,"]")).show(),isCurrentNavLink||$([document.documentElement,document.body]).animate({scrollTop:$("[".concat("data-gs-subpage","=").concat(subpageName,"] .").concat(subpageHeaderClass)).offset().top-gsSubpageNavHeightCollapsed},500)})),$(".gs-main").click((function(e){$subpageNav.hasClass("gs-nav--expanded")&&!e.target.hasAttribute(navLinkDataAttrName)&&$subpageNav.removeClass("gs-nav--expanded")})),$("[".concat("data-gs-subpage-link","]")).click((function(e){var subpageName=$(this).attr("data-gs-subpage-link");$("[".concat(navLinkDataAttrName,"=").concat(subpageName,"]")).trigger("click")})),getParameterByName("nav")&&$("a[".concat(navLinkDataAttrName,"=").concat(getParameterByName("nav"),"]")).trigger("click"),$("#gs-schedule-nav a").click((function(e){e.preventDefault(),$([document.documentElement,document.body]).animate({scrollTop:$("a.gs-js-anchor-below-sticky-nav[name=".concat($(this).attr("href").substring(1),"]")).offset().top-gsSubpageNavHeightCollapsed},1e3,"swing")})),$("[data-gs-smooth-scroll-anchor]").click((function(e){e.preventDefault(),$([document.documentElement,document.body]).animate({scrollTop:$("[name=".concat($(this).attr("href").substring(1),"]")).offset().top-16},500,"swing")})),$(".lity-link").click((function(e){e.preventDefault(),lity($(this).attr("href"))})),$("main").is("#gamescom-2019")&&($("#gamescom-2019 .gs-form button").click((function(e){e.preventDefault(),postForm()})),postForm=function postForm(){var payload={name:$(".gs-form #name").val(),email:$(".gs-form #email").val(),country:$(".gs-form #country").val(),company:$(".gs-form #company").val(),game:$(".gs-form #game").val(),topic:$(".gs-form #topic").val()},url="https://prod-30.westcentralus.logic.azure.com:443/workflows/09397bc1c34b445bb27211672498bf30/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=o2E6d3lGH6puDwrp0ptcOS8B7mtMBNyLTNWJSKvjKqg",xhr=new XMLHttpRequest;return xhr.open("POST",url,!1),xhr.setRequestHeader("Content-type","application/json"),xhr.onreadystatechange=function(){4==xhr.readyState&&202==xhr.status&&$("#gamescom-2019 .gs-form").replaceWith('<h3 class="gs-subheading-2-5">Thank you!</h3>')},xhr.send(JSON.stringify(payload)),xhr.responseText});var cdnPath="https://query.prod.cms.rt.microsoft.com/cms/api/am/binary/";getCardsJSONAndRender=function getCardsJSONAndRender(){$.getJSON("".concat(cdnPath,"RE3TJ7G"),(function(json){renderCards(chooseWhichCards(sortByPublishedDate(json.data)))}))},renderCards=function renderCards(arr){var cardType,cardDate,formattedDate,labelText,linkText,imageUrl,isPublished,footerHTML="",linkIcon="",devPathToImages="\\gamedev\\static\\img\\";arr.forEach((function(card){cardType=card.contentType.indexOf("Blog")>=0?"blog":"event",cardDate="blog"==cardType?card.publishedDate:card.eventStartDate,formattedDate=new Date(cardDate).toLocaleDateString("en-US",{timeZone:"UTC",year:"numeric",month:"short",day:"numeric"}).toUpperCase(),labelText="blog"==cardType?"ARTICLE // ".concat(formattedDate):"EVENT // ".concat(formattedDate," // ").concat(card.eventLocation.toUpperCase()),linkText="blog"==cardType?"Read article":"Learn more",(card.contentType.indexOf("article")>=0||0==card.cardLink.indexOf("/games/"))&&(linkIcon="icon-popout"),imageUrl=location.href.indexOf("developer.microsoft")>=0?"".concat(cdnPath).concat(card.cardImage.cdnCode):"blog"==cardType?devPathToImages+"blog\\"+card.cardImage.fileName:devPathToImages+"events\\"+card.cardImage.fileName,footerHTML+='<div class="gs-card theme-'.concat(card.cardColor.cssId?card.cardColor.cssId.toLowerCase():"",' gs-col-6-vp3 gs-col-6-vp2" data-grid="col-4">\n\t\t\t\t\t<a href="').concat(card.cardLink,'" class="inner-card" ').concat("event"==cardType?"onfocus=\"this.style.outlineColor='"+card.cardColor.eventColorCode+"'\"":"",'>\n\t\t\t\t\t\t<img srcset="').concat(imageUrl,", ").concat(imageUrl,' 2x" src="').concat(imageUrl,'" alt="').concat(card.cardImage.altText,'">\n\t\t\t\t\t\t<div class="gs-card_content">\n\t\t\t\t\t\t\t<div class="gs-card_small-header header text-grey x-p-b-3x">').concat(labelText,'</div>\n\t\t\t\t\t\t\t<h2 class="gs-card_large-header c-heading-4" ').concat("event"==cardType?'style="color:'+card.cardColor.eventColorCode+'"':"",">").concat(card.cardHeader,'</h2>\n\t\t\t\t\t\t\t<p class="gs-card_body-text c-paragraph-4 ">').concat(card.cardDescription,'</p>\n\t\t\t\t\t\t\t<div class="bottom">\n\t\t\t\t\t\t\t\t<div class="x-m-t-6x c-hyperlink gs-visual-cta ').concat(linkIcon,'" ').concat("event"==cardType?'style="color:'+card.cardColor.eventColorCode+'"':"","><span>").concat(linkText,"</span></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t</div>")})),$('[data-cards="footer"]').html(footerHTML)},sortByPublishedDate=function sortByPublishedDate(arr){return arr.sort((function(a,b){var a1=a.publishedDate,b1=b.publishedDate;return a1==b1?0:a1<b1?1:-1}))},chooseWhichCards=function chooseWhichCards(arr){var selectedCardsArr=[],numBlog=0,numEvents=0;return arr.forEach((function(card){getPageName(card.cardLink)!==getPageName(location.href)&&(card.contentType.indexOf("Blog")>=0&&numBlog<3?(selectedCardsArr.push(card),numBlog++):card.contentType.indexOf("Event")>=0&&numEvents<0&&(selectedCardsArr.push(card),numEvents++))})),selectedCardsArr},getPageName=function getPageName(urlStr){return urlStr.lastIndexOf("/")==urlStr.length-1&&(urlStr=urlStr.substring(0,urlStr.length-1)),(urlStr=(urlStr=urlStr.split("?")[0]).split("#")[0]).split("/").pop()},getCardsJSONAndRender()}}));