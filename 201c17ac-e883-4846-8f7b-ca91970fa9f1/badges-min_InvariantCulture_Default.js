var Wdc=Wdc||{};Wdc.Cx=Wdc.Cx||{},Wdc.Cx.Badges=Wdc.Cx.Badges={},function(a){"use strict";function b(){var a=setInterval(function(){if(0!==$(".c-select-menu button").length)return $(".c-select-menu button").css("width","100%"),M.stopJsllDefaultEvent(),M.setBadgePreviewHeight(),clearInterval(a)},100);M.populatePreviewBadge()}function c(){h.on("click",function(){M.retrieveData();var a=M.validateBadgeData();a&&(M.generateBadge(),M.setBadgePreviewHeight(),M.SendTelemetry(J))}),i.on("click",function(){k.select(),document.execCommand("Copy"),M.SendTelemetry(K)})}var d=$("#selectLanguage"),e=$("#selectProduct"),f=$("#selectSize"),g=$("#inputStoreId"),h=$("#badgeSubmit"),i=$("#badgeCopy"),j=($(".badgeImage"),$(".badgeTextarea")),k=$("#badgeTextCode"),l=$(".badgeTextarea textarea"),m=$(".badgePreview"),n=($(".badgePreview img"),$("#selectLanguage option")),o=$(".inputErrorMsg"),p=$(".dataGridHeight"),q=$(".badgePreviewWrapper"),r=$(".badgeGeneratedGlyph"),s=null,t=null,u=null,v="id",w="?ocid=badge",x="large",y="small",z="href",A="size",B="srcLarge",C="srcSmall",D="alt",E=":selected",F="",G="border-color",H="x-hidden",I={},J={},K={},L={CLICKLEFT:"CL",KEYBOARDENTER:"KS"},M={removeHiddenClass:function(a){a.forEach(function(a){a.removeClass(H)})},removeErrorHighlight:function(a){a.forEach(function(a){a.css(G,F)})},addErrorHighlight:function(a){a.css(G,"red")},retrieveData:function(){I={srcLarge:d.find(E).data(x),srcSmall:d.find(E).data(y),alt:d.find(E).data(D),href:e.find(E).data(z),size:f.val(),id:g.val()},J={behavior:awa.behavior.CLICK,actionType:L.CLICKLEFT,contentTags:{contentName:h.text(),contentType:"button",language:d.val(),product:e.val(),size:f.val(),badgeId:g.val()}},K={behavior:awa.behavior.COPY,actionType:L.CLICKLEFT,contentTags:{contentName:i.text(),contentType:"button"}}},validateBadgeData:function(){M.removeErrorHighlight([s,t,u,g]),o.addClass(H);for(var a in I)if(I.hasOwnProperty(a)){var b=I[a];switch(a){case B:case C:if(void 0===b)return void M.addErrorHighlight(s);break;case z:if(void 0===b)return void M.addErrorHighlight(t);break;case A:if(null===b)return void M.addErrorHighlight(u);break;case v:if(b===F||12!==b.length)return M.addErrorHighlight(g),void o.removeClass(H).css("color","red")}}return!0},generateBadge:function(){m.html(F);var a=I.href+I.id+w,b=I.size===x?I.srcLarge:I.srcSmall,c=I.size===x?"":"width: 127px; height: 52px;",d=$("<a href='"+a+"' target='_blank'><img class='c-image' src='"+b+"' alt='"+I.alt+"' style='"+c+"'/></a>"),e="<a href='"+a+"'><img src='"+b+"' alt='"+I.alt+"'/></a>";m.append(d),l.val(e),M.removeHiddenClass([j,i,m,r]),q.css("background-color","#ffffff")},stopJsllDefaultEvent:function(){var a=[];s=$(".badgeLanguageSelect button"),t=$(".badgeProductSelect button"),u=$(".badgeSizeSelect button"),a.push(s,t,u),a.forEach(function(a){a.attr("data-bi-dnt","")})},SendTelemetry:function(a){awa.ct.captureContentPageAction(a)},populatePreviewBadge:function(){var a=[],b=location.pathname.toLowerCase().split("/").filter(Boolean)[0];n.each(function(){$(this).val()!==F&&a.push($(this).val())}),$.inArray(b,a)===-1&&(b="en-us"),$("#selectLanguage option[value='"+b+"']").attr("selected","selected");var c=$("#selectLanguage option[value='"+b+"']").data("large"),d=$("#selectLanguage option[value='"+b+"']").data("alt"),e=$("<img class='c-image' src='"+c+"' alt='"+d+"' />");m.append(e)},setBadgePreviewHeight:function(){var a=p.outerHeight();q.css({"margin-top":"40px",height:a-40+"px"}),$(window).resize(function(){var a=p.outerHeight();q.css("height",a-40+"px")})}};a.init=function(){b(),c()}}(Wdc.Cx.Badges),$(function(){Wdc.Cx.Badges.init()});