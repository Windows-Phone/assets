var Wdc=Wdc||{};Wdc.Cx=Wdc.Cx||{},Wdc.Cx.Video=Wdc.Cx.Video||{},Wdc.Cx.Video=function(){"use strict";function a(){if("zh-cn"!==window.location.pathname.split("/")[1].toLowerCase()){var a=document.getElementsByClassName("yt-player");if(0!==a.length){h.addYoutubeIframe();for(var b=function(){var a,b=this.parentNode.dataset.id,c=this.parentNode.dataset.cn,d=function(d){var e=!1,f=!1,i=!1;a.playVideo();var j=a.getDuration();a.addEventListener("onStateChange",function(d){var k,l;1===d.data&&(h.sendVideoTelemetry(awa.behavior.VIDEOSTART,g.CLICKLEFT,c,b,0),l=setInterval(function(){k=(a.getCurrentTime()/j*100).toFixed(2),Math.floor(k)>=25&&!e&&(h.sendVideoTelemetry(awa.behavior.VIDEOCHECKPOINT,g.CLICKLEFT,c,b,25),e=!0),Math.floor(k)>=50&&!f&&(h.sendVideoTelemetry(awa.behavior.VIDEOCHECKPOINT,g.CLICKLEFT,c,b,50),f=!0),Math.floor(k)>=75&&!i&&(h.sendVideoTelemetry(awa.behavior.VIDEOCHECKPOINT,g.CLICKLEFT,c,b,75),i=!0)},1e3)),0===d.data&&(h.sendVideoTelemetry(awa.behavior.VIDEOCOMPLETE,g.CLICKLEFT,c,b,100),clearInterval(l))})},e=function(c){var e=$(c).attr("id");a=new YT.Player(e,{videoId:b,playerVars:{controls:1,modestbranding:1},events:{onReady:d}})};e(this)},c=document.getElementsByClassName("player"),d=0;d<a.length;d++){c[d].setAttribute("id","player"+d);var e=a[d].dataset.poster,f=a[d].dataset.alt;c[d].innerHTML=h.getYoutubeImg(e,f),c[d].onclick=b,a[d].appendChild(c[d])}}}}function b(){var a=$(".c9-iframe");0!==a.length&&$.each(a,function(a,b){var c=$(b).data("alt"),d=$(b).data("poster");$(b).append(h.createVideoPoster(d,c));var e;$(b).on("keypress",function(a){e=this,13===a.keyCode&&h.playC9Video(e)}).on("click",function(){e=this,h.playC9Video(e)})})}function c(){var a=$(".html5-videos");0!==a.length&&$.each(a,function(a,b){var c,d=$(b).data("alt"),e=$(b).data("poster");$(b).append(h.createVideoPoster(e,d)),$(b).on("keypress",function(a){c=this,13===a.keyCode&&h.createHtml5Video(c)}).on("click",function(){c=this,h.createHtml5Video(c)})})}function d(){var a=$(".onePlayer");0!==a.length&&$.each(a,function(a,b){var c,d=$(b).data("poster"),e=$(b).data("alt");$(b).data("id");$(b).append(h.createVideoPoster(d,e)),$(b).on("keypress",function(a){c=this,13===a.keyCode&&h.createOnePlayer(c)}).on("click",function(){c=this,h.createOnePlayer(c)})})}function e(){var a=0;$("a, input, select, option, .c9-iframe img, .player img").each(function(){this.tabIndex=a++})}function f(){a(),b(),c(),d(),e()}var g={CLICKLEFT:"CL",KEYBOARDENTER:"KS"},h={addYoutubeIframe:function(){var a=document.createElement("script");$.getScript("https://www.youtube.com/iframe_api",function(b,c,d){"success"===c&&200===d.status&&a.setAttribute("src","https://www.youtube.com/iframe_api")});var b=document.getElementsByTagName("script"),c=b[b.length-1];c.parentNode.insertBefore(a,c)},getYoutubeImg:function(a,b){return"<img class='img-responsive embed-responsive-item' src='"+a+"' alt='"+b+"'/>"},createVideoPoster:function(a,b){return $("<img class='c-image img-responsive embed-responsive-item' src='"+a+"' alt='"+b+"'/>")},sendVideoTelemetry:function(a,b,c,d,e){var f={behavior:a,actionType:b,contentTags:{vidnm:c,vidid:d,vidpct:e}};awa.ct.captureContentPageAction(f)},playC9Video:function(a){var b=$(a).data("src"),c=$("<iframe src='"+b+"' allowFullScreen frameBorder='0'></iframe>");$(a).addClass("embeddedvideo").empty(),$(a).append(c),$(a).removeClass("embed-responsive-16by9")},createHtml5Video:function(a){$(a).children().remove();var b=$("<video controls><source src='"+a.getAttribute("data-src")+"' type='video/mp4'><source src='"+a.getAttribute("data-src")+"' type='video/ogg'><source src='"+a.getAttribute("data-src")+"' type='video/webm'>Your browser does not support the video tag.</video>");$(a).append(b),$(a).children()[0].addEventListener("durationchange",function(){var b,c=!1,d=!1,e=!1,f=!1,i=!1,j=$(a).children()[0].duration,k=$(a)[0].dataset.cn,l=$(a)[0].dataset.id;$(a).children()[0].ontimeupdate=function(){b=($(a).children()[0].currentTime/j*100).toFixed(2),0!==Math.floor(b)||c||(h.sendVideoTelemetry(awa.behavior.VIDEOSTART,g.CLICKLEFT,k,l,0),c=!0),25!==Math.floor(b)||d||(h.sendVideoTelemetry(awa.behavior.VIDEOCHECKPOINT,g.CLICKLEFT,k,l,25),d=!0),50!==Math.floor(b)||e||(h.sendVideoTelemetry(awa.behavior.VIDEOCHECKPOINT,g.CLICKLEFT,k,l,50),e=!0),75!==Math.floor(b)||f||(h.sendVideoTelemetry(awa.behavior.VIDEOCHECKPOINT,g.CLICKLEFT,k,l,75),f=!0),100!==Math.floor(b)||i||(h.sendVideoTelemetry(awa.behavior.VIDEOCOMPLETE,g.CLICKLEFT,k,l,100),i=!0)}}),$(a).children()[0].play()},createOnePlayer:function(a){$(a).children().remove();var b=$(a).data("id"),c=$(a).attr("id"),d={options:{autoplay:!0,mute:!1,loop:!1,market:"en-us",playFullScreen:!0},metadata:{videoId:b}};MsOnePlayer.render(c,d)}};return{init:f}}(),$(function(){Wdc.Cx.Video.init()});