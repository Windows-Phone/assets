if(typeof WPCPub==="undefined")WPCPub={};(WPCPub.StoreBadges=function(){"use strict";var requireString="require",jQueryString="jquery",selectedLanguage=undefined,badgeType=undefined,appId=undefined,badgeAltText=undefined,badgeStylesLen=2,$rowElement=undefined,ocidQueryString="?ocid=badge",emptyString="",inputString="input",imgString="img",checkedString="checked",appGamesString="apps-games",hiddenString="temp-hidden",templateString="template",regenerateString="regenerate-badges",jQueryInputElementString='input[name="badge-style"]',jQueryInputCheckedElementString='input[name="badge-style"]:checked',rowElementString='<div class="row"></div>',$template=$("#badgeList .template").clone(),$containerElement=$("#badgeList .badge-container"),$appIdElement=$("#appId"),$languageElement=$("#language"),$badgeCodeElement=$("#badge-code"),$sampleBadgeElement=$("#sample-badge"),$sampleBadgeContainerElement=$("#sample-badge-container"),$typeElement=$("#type"),$sampleBadgeContent=$("#sample-badge .content"),$formBadgeGenerator=$("form#badge-generator"),defaultAltText=["Get it from Microsoft","Get","Get it on Windows 10"],appStoreUrls={"default":"https://www.microsoft.com/store/apps/%appid%","windows-8-x":"http://apps.microsoft.com/windows/app/%appid%","windows-phone":"http://www.windowsphone.com/s?appid=%appid%","windows-10":"https://www.microsoft.com/store/apps/%appid%",movie:"https://www.microsoft.com/store/movies/badge/%appid%",music:"https://www.microsoft.com/store/music/%appid%","music-album":"https://www.microsoft.com/store/music/album/badge/title/%appid%","music-track":"https://www.microsoft.com/store/music/track/badge/title/song/%appid%","tv-series":"https://www.microsoft.com/store/tv/badge/%appid%","tv-season":"https://www.microsoft.com/store/tv/badge/season/%appid%","tv-episode":"https://www.microsoft.com/store/tv/badge/season/title/%appid%"},processStoreBadgeForm=function(event){selectedLanguage=$languageElement.val();if(!event||$(event.target).hasClass(regenerateString)){badgeStylesLen=2;if($typeElement.val()===appGamesString)badgeStylesLen=3;$containerElement.empty();$rowElement=$(rowElementString);for(var newBadgeSrc=undefined,newBadgeImage=undefined,getListIndex=0;getListIndex<badgeStylesLen;getListIndex++){$containerElement.append($rowElement);newBadgeSrc=window.storeBadgeUrls[selectedLanguage][getListIndex];newBadgeImage=$template.clone().removeClass(templateString);badgeAltText=setBadgeAltText(getListIndex);newBadgeImage.find(imgString).attr("src",newBadgeSrc).attr("alt",badgeAltText);newBadgeImage.find("label").attr("for","badge-style-"+getListIndex);newBadgeImage.find(inputString).attr("id","badge-style-"+getListIndex).attr("value",newBadgeSrc);if(getListIndex===0)newBadgeImage.find(inputString).prop(checkedString,true);else newBadgeImage.find(inputString).prop(checkedString,false);$rowElement.append(newBadgeImage)}}},setBadgeAltText=function(indexer){if(window.badgeUIStrings!==undefined)return window.badgeUIStrings[selectedLanguage]===undefined?defaultAltText[indexer]:window.badgeUIStrings[selectedLanguage][indexer];return defaultAltText[indexer]},generateBadgeStyles=function(event){appId=$appIdElement.val();var selectedBadge=$(jQueryInputCheckedElementString).val(),storeUrl=appStoreUrls[$typeElement.val()]||appStoreUrls.default;badgeAltText=$(jQueryInputCheckedElementString).next().attr("alt");var code=['<a href="'+storeUrl.replace("%appid%",appId)+ocidQueryString+'">','<img src="'+selectedBadge+'" alt="'+badgeAltText+'" />',"</a>"].join("");$sampleBadgeContainerElement.removeClass(hiddenString);$badgeCodeElement.val(code).focus().select();$sampleBadgeElement.addClass("active");$sampleBadgeContent.html(code).find(imgString).attr("src",selectedBadge);return false};define([requireString],function(require){require([jQueryString,window.storeBadgeUrls.uistrings],function($){$(document).ready(function(){processStoreBadgeForm();$("input, select").on("change",processStoreBadgeForm);$formBadgeGenerator.on("submit",generateBadgeStyles)})})})})()