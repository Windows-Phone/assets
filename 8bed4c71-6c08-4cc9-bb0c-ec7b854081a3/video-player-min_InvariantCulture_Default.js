var Wdc=Wdc||{};Wdc.Cx=Wdc.Cx||{},Wdc.Cx.Video=Wdc.Cx.Video||{},Wdc.Cx.Video=function(){"use strict";function a(){if("zh-cn"!==window.location.pathname.split("/")[1].toLowerCase()){var a=document.getElementsByClassName("yt-player");if(0!==a.length){e.addYoutubeIframe();for(var b=function(){var a,b=this.parentNode.dataset.id,c=this.parentNode.dataset.cn,d=function(b){var d=!1,f=!1,g=!1;b.target.playVideo();var h=a.getDuration();a.addEventListener("onStateChange",function(b){var i,j;1===b.data&&(e.startVideoWedcs(c),j=setInterval(function(){i=(a.getCurrentTime()/h*100).toFixed(2),Math.floor(i)>=25&&!d&&(MscomCustomEvent("ms.InteractionType","101","ms.video.completionrate","25","cn",c),d=!0),Math.floor(i)>=50&&!f&&(MscomCustomEvent("ms.InteractionType","101","ms.video.completionrate","50","cn",c),f=!0),Math.floor(i)>=75&&!g&&(MscomCustomEvent("ms.InteractionType","101","ms.video.completionrate","75","cn",c),g=!0)},1e3)),0===b.data&&(e.endedVideoWedcs(c),clearInterval(j))})},f=function(c){var e=$(c).attr("id");a=new YT.Player(e,{videoId:b,playerVars:{controls:1,modestbranding:1},events:{onReady:d}})};f(this)},c=document.getElementsByClassName("player"),d=0;d<a.length;d++){c[d].setAttribute("id","player"+d);var f=a[d].dataset.poster,g=a[d].dataset.alt;c[d].innerHTML=e.getYoutubeImg(f,g),c[d].onclick=b,a[d].appendChild(c[d])}}}}function b(){var a=$(".c9-iframe");0!==a.length&&$.each(a,function(a,b){var c=$(b).data("alt"),d=$(b).data("poster");$(b).append(e.createChannelNineImg(d,c));var f;$(b).on("keypress",function(a){f=this,13===a.keyCode&&e.playVideo(f)}).on("click",function(){f=this,e.playVideo(f)})})}function c(){var a=0;$("a, input, select, option, .c9-iframe img, .player img").each(function(){this.tabIndex=a++})}function d(){a(),b(),c()}var e={addYoutubeIframe:function(){var a=document.createElement("script");$.getScript("https://www.youtube.com/iframe_api",function(b,c,d){"success"===c&&200===d.status&&a.setAttribute("src","https://www.youtube.com/iframe_api")});var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)},startVideoWedcs:function(a){MscomCustomEvent("ms.InteractionType","100","ms.video.completionrate","0","cn",a+": video started")},endedVideoWedcs:function(a){MscomCustomEvent("ms.InteractionType","103","ms.video.completionrate","100","cn",a)},getYoutubeImg:function(a,b){return"<img class='img-responsive embed-responsive-item' src='"+a+"' alt='"+b+"'/>"},createChannelNineImg:function(a,b){return $("<img class='img-responsive embed-responsive-item' src='"+a+"' alt='"+b+"'/>")},createChannelNineIframe:function(a){return $("<iframe src='"+a+"' allowFullScreen frameBorder='0'></iframe>")},playVideo:function(a){$(a).addClass("embeddedvideo").empty();var b=$(a).data("src");$(a).append(e.createChannelNineIframe(b)),$(a).removeClass("embed-responsive-16by9")}};return{init:d}}(),$(function(){Wdc.Cx.Video.init()});