var Wdc={};Wdc.Cpub={},Wdc.Cpub.Samples={},Wdc.Cpub.Samples=function(){function a(){$(I).val(ca.toLowerCase()),h()}function b(){if(window.location.href.indexOf("?")!==-1&&window.location.href.indexOf("setvar=")===-1){var a,b,c,d,e=window.location.href.split("?")[1].split("&"),f=function(a,b){var c=a===da?b.substring(b.length,a.length).split("+").join(" "):b.substring(b.length,a.length);return c};$.each(e,function(e,g){g.indexOf(da)!==-1?a=f(da,g):g.indexOf(ea)!==-1?b=f(ea,g):g.indexOf(fa)!==-1?c=f(fa,g):d=f(ga,g)}),"undefined"!=typeof a&&a!==p&&$(Q).val(a),"undefined"!=typeof b&&b!==p&&$(G).val(b.toLowerCase()),"undefined"!=typeof c&&c!==p&&$(H).val(c.toLowerCase()),"undefined"!=typeof d&&d!==p&&$(I).val(d.toLowerCase()),h()}}function c(){na.createListGrid(ja),na.pagination.navigation(ja.length),na.updateSearchResultStatus(ja.length,p,p,p,p)}function d(){for(var a=$(D).length,b=[],c=0;c<4-a;){var d=Math.floor(Math.random()*ja.length+1);b.push(ja[d]),c++}na.createTileGrid(b,1)}function e(){var a=function(a,b){var c=[];for(var d in a)a.hasOwnProperty(d)&&c.push({key:d,value:a[d]});c.sort(function(a,b){var c=a.value.toLowerCase(),d=b.value.toLowerCase();return c<d?-1:c>d?1:0});for(var e=0;e<c.length;e++){var f=$("<option value='"+c[e].key.toLowerCase()+"'>"+c[e].value+"</option>");b.append(f)}};a(na.dictionary.categories,$(G)),a(na.dictionary.languages,$(H)),a(na.dictionary.platforms,$(I))}function f(){var a,b=1e3,c=p;$(Q).on("keyup",function(){var d=$(Q).val().replace(/\s/g,p);d!==c&&(c=d,g(),clearTimeout(a),a=setTimeout(na.filter.filterSamples,b))});var d=function(){c=p,$(Q).val(p),$(G).val(Z),$(H).val(Z),$(I).val(Z),h()};$(S).click(d),$(S).keydown(function(a){13===a.keyCode&&d()})}function g(){$(T).hide(),$(R).removeClass(W),$(w).addClass(W),$(v).addClass(W),$(B).addClass(W)}function h(){g(),setTimeout(na.filter.filterSamples,100)}function i(){$(G).on("change",function(){h()}),$(H).on("change",function(){h()}),$(I).on("change",function(){h()}),$(E).on("change",function(){na.toggleTableView()})}function j(){$(".data-list-view").on("click",function(a){if(a.stopPropagation(),"A"===a.target.tagName){var b=a.target.innerHTML;na.sendTelemetry(r.length,l,m,n,o,b)}})}function k(){e(),a(),d(),b(),f(),i(),j(),na.updateAccessibility()}var l,m,n,o,p="",q="https://raw.githubusercontent.com/",r=[],s=$(".compatPrev").text(),t=$(".compatNext").text(),u=$(".imgPlaceholder").text(),v=".table-tile-view",w=".table-list-view",x=".table-tile-view > .row",y=".table-tile-view > .row > div",z=".table-list-view > .table > .data-list-view",A=".table-list-view > .table > .data-list-view > tr",B=".list-pagination",C=".row-feature",D=".row-feature > div",E=".view-select",F=".view-select option:selected",G=".category-select",H=".language-select",I=".platform-select",J=".category-select option:selected",K=".language-select option:selected",L=".platform-select option:selected",M=".tile-pagination, .list-pagination",N=".tile-pagination li, .list-pagination li",O=".previous-pagination",P=".next-pagination",Q=".form-searchbox input[type='text']",R=".loading",S=".search-clear-btn",T=".search-status-hasinput",U=".search-status-noinput",V="active",W="hidden",X="list-view",Y="class",Z="all",_="Category",aa="Language",ba="Platform",ca="UWP",da="sq=",ea="cat=",fa="lang=",ga="platform=",ha=12,ia=1,ja=[];for(var ka in window.samplesData)if(window.samplesData.hasOwnProperty(ka))for(var la=window.samplesData[ka],ma=0;ma<la.length;ma++)ja.push(la[ma]);ja.sort(function(a,b){var c=a.Name.toLowerCase(),d=b.Name.toLowerCase();return c<d?-1:c>d?1:0});var na={dictionary:{categories:{Accessibility:"Accessibility",AppSettings:"App settings",AudioVideoAndCamera:"Audio, video, and camera",Communications:"Communications",ContactsAndCalendar:"Contacts and calendar",ControlsLayoutAndText:"Controls, layout, and text",CustomUserInteractions:"Custom user interactions",Data:"Data",DebugTestAndPerf:"Debugging, testing, and performance",DeepLinksAndAppToAppCommunication:"Deep links and app-to-app communication",DevicesSensorsAndPower:"Devices, sensors, and power",FilesFoldersAndLibraries:"Files, folders, and libraries",Gaming:"Gaming",GlobalizationAndLocalization:"Globalization and localization",GraphicsAndAnimation:"Graphics and animation",Holographic:"Holographic",IdentitySecurityAndEncryption:"Identity, security, and encryption",Inking:"Ink",LaunchingAndBackgroundTasks:"Launching and background tasks",MapsAndLocation:"Maps and location",Navigation:"Navigation",NetworkingAndWebServices:"Networking and web services",PlatformArchitecture:"Platform and architecture",Printing:"Printing",SpeechAndCortana:"Speech and Cortana",Threading:"Threading",Touch:"Touch",TilesToastAndNotifications:"Tiles, toasts, and notifications",TrialsAdsAndInAppPurchases:"Trials, ads, and in-app purchases"},languages:{cs:"C#",vb:"VB",js:"JS",cpp:"C++"},platforms:{UWP:"UWP",ClassicDesktop:"Classic desktop"}},removeAllView:function(){na.removeTableTileView(),na.removeTableListView(),na.removePaginationView()},removeTableTileView:function(){$(x).html(p)},removeTableListView:function(){$(z).html(p)},removePaginationView:function(){$(B).html(p)},tableEllipsis:function(){var a=$("table tr td:nth-child(2)");a.css("max-width",$(window).outerWidth()-900),$(window).resize(function(){a.css("max-width",$(window).outerWidth()-600>=1200?1e3:$(window).outerWidth()-600)})},createTileGrid:function(a,b){for(var c=0;c<a.length;c++){var d=a[c].Name,e=a[c].HtmlUrl,f=a[c].Description,g=a[c].Description,h="Undefined"!==a[c].Image?q+a[c].FullName+"/master/"+a[c].Image:u,i=$("<div class='col-xs-24 col-md-12 col-lg-6'></div>"),j=$("<section class='section item-section'></section>"),k=$("<header class='section-header'></header>"),l=$("<div class='media-container'><a target='_blank' href='"+e+"'><img class='img-responsive win-color-bg-10' src='"+h+"' /></a></div>"),m=$("<h5 class='section-title text-maxlines-1'><a target='_blank' href='"+e+"'>"+d+"</a></h5>"),n=$("<div class='section-body'><p class='text-maxlines-1' title='"+g+"' class='media-title'>"+f+"</p></div>"),o=k.append(l).append(m),p=j.append(o).append(n),r=i.append(p);switch(b){case 1:$(C).append(r);break;case 2:$(x).append(r)}}},createListGrid:function(a){for(var b=0;b<a.length;b++){var c=a[b].Name,d=a[b].HtmlUrl,e=a[b].Description,f=a[b].Description,g=(a[b].Platform,$("<tr></tr>")),h=$("<td><a target='_blank' href='"+d+"'>"+c+"</a></td>"),i=$("<td title='"+f+"'>"+e+"</td>"),j=g.append(h).append(i);$(z).append(j)}na.tableEllipsis()},toggleTableView:function(){$(F).attr(Y)!==X?($(v).removeClass(W),$(w).addClass(W)):($(w).removeClass(W),$(v).addClass(W))},pagination:{changePageNumber:function(a){if(!isNaN(a)){$(y).hide(),$(A).hide(),$(N).hasClass(V)&&$(N).removeClass(V),$(".tile-pagination li[data-page-number='"+a+"'], .list-pagination li[data-page-number='"+a+"']").addClass(V);for(var b=(a-1)*ha,c=a*ha,d=b+1;d<c+1;d++)$(x+" > div:nth-of-type("+d+")").show(),$(z+" > tr:nth-of-type("+d+")").show();ia=a}},updatePageNumbersList:function(a,b,c,d){$(N).hasClass(V)&&$(N).removeClass(V),$(".tile-pagination li[data-page-number='"+a+"'], .list-pagination li[data-page-number='"+a+"']").addClass(V),$(".page").addClass(W);var e=[];if(b<=5){c.hide(),d.hide();for(var f=1;f<=b;f++)e.push(f)}else a<=2||a>=b-1?(c.show(),d.hide(),e.push(1,2,b-1,b)):(c.show(),d.show(),e.push(1,b),3===a?e.push(3,4,5):a===b-2?e.push(b-4,b-3,b-2):e.push(a-1,a,a+1));for(var g=0;g<e.length;g++)$("li.page[data-page-number='"+e[g]+"']").removeClass(W)},navigation:function(a){if(a>0){na.removePaginationView();var b=a/ha,c=Math.ceil(b),d=$("<li class='previous-pagination'><a href='#' aria-label='"+s+"'><span aria-label='true'></span></a></li>"),e=$("<li class='next-pagination'><a href='#' aria-label='"+t+"'><span aria-label='true'></span></a></li>"),f=$(M);f.append(d);for(var g=$("<li class='left-truncation-dots disabled'><a href='#'>...</a></li>"),h=$("<li class='right-truncation-dots disabled'><a href='#'>...</a></li>"),i=1;i<=c;i++)f.append("<li class='page hidden' data-page-number='"+i+"'><a>"+i+"</a></li>"),2===i?f.append(g):i===c-1&&f.append(h);f.append(e),$(y).hide(),$(A).hide(),$.each($(y),function(a,b){a<ha&&$(this).show()}),$.each($(A),function(a,b){a<ha&&$(this).show()}),na.pagination.updatePageNumbersList(1,c,g,h),$(".page").on("click",function(){var a=$(this).data("page-number");na.pagination.updatePageNumbersList(a,c,g,h),na.pagination.changePageNumber(a)}),$(O).on("click",function(a){a.preventDefault(),1!==ia&&(na.pagination.updatePageNumbersList(ia-1,c,g,h),na.pagination.changePageNumber(--ia))}),$(P).on("click",function(a){a.preventDefault(),ia<b&&(na.pagination.updatePageNumbersList(ia+1,c,g,h),na.pagination.changePageNumber(++ia))})}else na.removePaginationView()}},updateAccessibility:function(){var a=0;$("a, input, select, option").each(function(){this.tabIndex=a++}),$(".left-truncation-dots a, .right-truncation-dots a").removeAttr("tabindex")},updateSearchResultStatus:function(a,b,c,d,e){$(".search-result-count").text(a);var f=$(G)[0].value,g=$(H)[0].value,h=$(I)[0].value;b||f!==Z||g!==Z||h!==Z?($(S).show(),$(U).hide(),$(T).show()):($(S).hide(),$(U).show(),$(T).hide());var i=[];"undefined"!=typeof b&&null!==b&&b!==p&&i.push($(".search-status-query-label").text()+' "'+b+'"'),"undefined"!=typeof c&&null!==c&&c!==p&&f!==Z&&i.push($(".search-status-category-label").text()+' "'+c+'"'),"undefined"!=typeof d&&null!==d&&d!==p&&g!==Z&&i.push($(".search-status-language-label").text()+' "'+d+'"'),"undefined"!=typeof e&&null!==e&&e!==p&&h!==Z&&i.push($(".search-status-platform-label").text()+' "'+e+'"'),$(".search-inputs").text(i.join(", "))},sendTelemetry:function(a,b,c,d,e,f){MscomCustomEvent("ms.search.query",null===b?p:b,"ms.search.productfilter",null===c?p:c,"ms.search.type",null===d?p:d,"ms.search.sourcefilter",null===e?p:e,"ms.search.count",a,"cn",f)},filter:{getSearchResult:function(a){for(var b=[],c=a.filter(Boolean),d=0;d<ja.length;d++)for(var e=0;e<c.length;e++){var f=ja[d],g=c[e],h=f.Keywords+" "+f.Name.toLowerCase()+" "+f.Description.toLowerCase(),i=h.match("\\b"+g);null!==i&&$.inArray(f,b)===-1&&b.push(f)}return b},getFilteredResult:function(a,b,c){for(var d=[],e=0;e<a.length;e++){var f=a[e][b].match("\\b"+c+"\\b");null!==f&&d.push(a[e])}return d},getMappedString:function(a,b){var c;for(var d in b)b.hasOwnProperty(d)&&b[d]===a&&(c=d);return c},createFilteredSample:function(a){na.removeAllView(),0!==a.length&&(na.createListGrid(a),na.pagination.navigation(a.length))},showNoResultUI:function(a,b,c,d,e,f,g,h,i){na.updateSearchResultStatus(0,b,c,d,e),na.sendTelemetry(a.length,f,g,h,i),na.updateAccessibility()},filterSamples:function(){$(B).removeClass(W);var a=$(Q).val(),b=$(J).text(),d=$(K).text(),e=$(L).text(),f=na.filter.getMappedString(b,na.dictionary.categories),g=na.filter.getMappedString(d,na.dictionary.languages),h=na.filter.getMappedString(e,na.dictionary.platforms);if(l=a!==p?a.toLowerCase().split(" "):null,m=void 0!==f?f:null,n=void 0!==g?g:null,o=void 0!==h?h:null,$(R).addClass(W),$(F).attr(Y)!==X?$(v).removeClass(W):$(w).removeClass(W),null!==l){if(r=na.filter.getSearchResult(l),na.removeAllView(),0===r.length)return void na.filter.showNoResultUI(r,a,b,d,e,l,m,n,o);if(null!==m){if(r=na.filter.getFilteredResult(r,_,m),0===r.length)return void na.filter.showNoResultUI(r,a,b,d,e,l,m,n,o);if(null!==n){if(r=na.filter.getFilteredResult(r,aa,n),0===r.length)return void na.filter.showNoResultUI(r,a,b,d,e,l,m,n,o);if(null!==o&&(r=na.filter.getFilteredResult(r,ba,o),0===r.length))return void na.filter.showNoResultUI(r,a,b,d,e,l,m,n,o)}else if(null!==o&&(r=na.filter.getFilteredResult(r,ba,o),0===r.length))return void na.filter.showNoResultUI(r,a,b,d,e,l,m,n,o)}else if(null!==n){if(r=na.filter.getFilteredResult(r,aa,n),0===r.length)return void na.filter.showNoResultUI(r,a,b,d,e,l,m,n,o)}else null!==o&&(r=na.filter.getFilteredResult(r,ba,o));na.filter.createFilteredSample(r),na.updateSearchResultStatus(r.length,a,b,d,e),na.sendTelemetry(r.length,l,m,n,o)}else if(null!==m){if(r=na.filter.getFilteredResult(ja,_,m),na.removeAllView(),0===r.length)return void na.filter.showNoResultUI(r,a,b,d,e,l,m,n,o);if(null!==n){if(r=na.filter.getFilteredResult(r,aa,n),0===r.length)return void na.filter.showNoResultUI(r,a,b,d,e,l,m,n,o);if(null!==o&&(r=na.filter.getFilteredResult(r,ba,o),0===r.length))return void na.filter.showNoResultUI(r,a,b,d,e,l,m,n,o)}else if(null!==o&&(r=na.filter.getFilteredResult(r,ba,o),0===r.length))return void na.filter.showNoResultUI(r,a,b,d,e,l,m,n,o);na.filter.createFilteredSample(r),na.updateSearchResultStatus(r.length,a,b,d,e),na.sendTelemetry(r.length,l,m,n,o)}else if(null!==n){if(r=na.filter.getFilteredResult(ja,aa,n),na.removeAllView(),0===r.length)return void na.filter.showNoResultUI(r,a,b,d,e,l,m,n,o);if(null!==o&&(r=na.filter.getFilteredResult(r,ba,o),0===r.length))return void na.filter.showNoResultUI(r,a,b,d,e,l,m,n,o);na.filter.createFilteredSample(r),na.updateSearchResultStatus(r.length,a,b,d,e),na.sendTelemetry(r.length,l,m,n,o)}else null!==o?(r=na.filter.getFilteredResult(ja,ba,o),na.filter.createFilteredSample(r),na.updateSearchResultStatus(r.length,a,b,d,e),na.sendTelemetry(r.length,l,m,n,o)):(na.removeAllView(),c());na.updateAccessibility()}}};return{init:k}}(),$(function(){Wdc.Cpub.Samples.init()});