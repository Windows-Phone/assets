require.config({baseUrl:"//cdn.support.services.microsoft.com/support-web-sdk/v2/latest",paths:{MsSupportSdk:"support.sdk.all"},config:{app:{appConfig:{env:"PRODUCTION",partnerId:"devcenter",appId:"support-portal"},issueConfig:{product:"WindowsDevCenter",issue:void 0,language:void 0,country:void 0},chatConfig:{}}}}),define("app",["require","MsSupportSdk","module"],function(a,b,c){"use strict";function d(){U=X.detectBrowserLanguage(),$.inArray(U,W)!==-1&&A.removeClass(B)}function e(){var a=[t,p,r,s];$.each(a,function(a,b){b.css("width","100%")})}function f(){S=window.location.pathname.split("/").filter(Boolean)[0].toLocaleLowerCase();var a=S.split("-");c.config().issueConfig.language=a[0],c.config().issueConfig.country=a[1]}function g(){X.watchSupportTopicSelect(),X.watchIssueTypeSelect(),X.watchHardwareIssueTypeSelect(),X.watchSubcategorySelect(),X.watchChatNowButton()}function h(){i.init(Q).then(function(){d(),e(),f(),g()})}var i=a("MsSupportSdk"),j=$(".issueTypeWrapper"),k=$(".subcategoryWrapper"),l=$(".contactMethodWrapper"),m=$(".liveChatWrapper"),n=$(".incidentWrapper"),o=$(".customWrapper"),p=$("#subcategorySelect"),q=$("#subcategorySelect option"),r=$("#issueTypeSelect"),s=$("#hardwareIssueTypeSelect"),t=$("#supportTopicSelect"),u=$(".chatNow"),v=$(".peopleWaiting"),w=$(".queueLength"),x=$(".chatUnavailable"),y=$(".signInMessage"),z=$(".incidentHref"),A=$(".optionViewable"),B="x-hidden",C="default",D="hide",E="show",F="enabled",G="disabled",H="issuetype",I="incidentUrl",J="topic",K=":selected",L="hardware",M="viewable",N="DevCenterT1",O="DevCenterT2",P={writeEvent:function(a){}},Q={logger:P,partnerId:c.config().appConfig.partnerId,appId:c.config().appConfig.appId},R={POPUP:2,WIDTH:360,HEIGHT:480},S=null,T=null,U=null,V=["en-us"],W=["en-us","en-ca"],X={detectBrowserLanguage:function(){var a=window.navigator.language.toLowerCase();return a},updateButtonUi:function(a,b){switch(a){case"show":$.each(b,function(a,b){b.removeClass(B)});break;case"hide":$.each(b,function(a,b){b.addClass(B)});break;case"disabled":$.each(b,function(a,b){b.attr("aria-disabled","true"),b.css("pointer-events","none")});break;case"enabled":$.each(b,function(a,b){b.attr("aria-disabled","false"),b.css("pointer-events","auto")})}},filterSubCategory:function(a){q.each(function(){$(this).val()!==C&&($(this).parent().is("span")&&$(this).unwrap(),$(this).data(H)!==a&&$(this).wrap("<span class='x-hidden'></span>"))}),X.updateButtonUi(E,[k])},initChatModalities:function(){c.config().issueConfig.environment=i.api.modalities.Environment[c.config().appConfig.env],c.config().issueConfig.mode="";var a=i.api.modalities.get(c.config().issueConfig);return a},createChatEvents:function(){return{onUnloaded:function(){X.updateButtonUi(F,[u]),X.updateButtonUi(E,[v])}}},renderButtonControl:function(a,b){if(z.attr("href",b),"appCertificationFailures"===a||T===L)return void X.updateButtonUi(E,[l,n]);var d=["inAppPurchases","packageManagement","ageRatings","lobApps","sdkIntegration","collaborate","hardwareDriversOrIot"],e=$.inArray(a,d)!==-1?O:N;c.config().issueConfig.issue=e,X.initChatModalities().then(function(a){c.config().chatConfig=X.createChatEvents(),c.config().chatConfig.modalities=a,$.when(a[0].getAvailability().then(function(a){},function(a){X.updateButtonUi(E,[x])}),a[0].getQueueLength().then(function(a){w.text(a)},function(a){v.hide()})).promise().done(function(){X.updateButtonUi(D,[y])})},function(){X.updateButtonUi(E,[x])}),$.inArray(S,V)===-1?X.updateButtonUi(E,[l,n]):X.updateButtonUi(E,[l,m,n])},displayIssueTypeSelectElement:function(a){a===L?(r.addClass(B),s.removeClass(B)):(r.removeClass(B),s.addClass(B))},render:function(a){var b=a.value,c=$(a).find(K).data("subcategory"),d=$(a).find(K).data("supportUrl");X.updateButtonUi(D,[k,l,m,n,y,x]),p.prop("selectedIndex",0),X.updateButtonUi(F,[u]),X.updateButtonUi(E,[v]),c?X.filterSubCategory(b):b===C||c||X.renderButtonControl(b,d)},watchSupportTopicSelect:function(){t.on("change",function(){var a=this.value,b=$(this).find(K).data(H),c=$(this).find(K).data(I),d=$(this).find(K).data(J);T=d,X.updateButtonUi(D,[j,k,l,m,n,o,y,x]),r.prop("selectedIndex",0),s.prop("selectedIndex",0),X.updateButtonUi(F,[u]),X.updateButtonUi(E,[v]),z.attr("href",c),b?(X.displayIssueTypeSelectElement(d),X.updateButtonUi(E,[j])):a===M?X.updateButtonUi(E,[o]):a!==C&&X.updateButtonUi(E,[l,n])})},watchIssueTypeSelect:function(){r.on("change",function(){var a=this;X.render(a)})},watchHardwareIssueTypeSelect:function(){s.on("change",function(){var a=this;X.render(a)})},watchSubcategorySelect:function(){p.on("change",function(){var a=this.value,b=$(this).find(K).data("supportUrl");X.updateButtonUi(F,[u]),X.updateButtonUi(E,[v]),a!==C?X.renderButtonControl(a,b):X.updateButtonUi(D,[l,m,n,y])})},watchChatNowButton:function(){u.on("click",function(a){a.preventDefault();var b=window.msCommonShell.meControlOptions().userData,d=b.idp,e=b.firstName+" "+b.lastName,f=b.memberName;return window.msCommonShell.AuthState.NotSignedIn===b.authenticatedState?void X.updateButtonUi(E,[y]):(c.config().chatConfig.uiInfo={type:R.POPUP,width:R.WIDTH,height:R.HEIGHT},c.config().chatConfig.authInfo={type:d},c.config().chatConfig.surveyType=i.ui.SurveyType.NONE,c.config().chatConfig.context=[{name:"full name",value:e},{name:"email",value:f}],X.updateButtonUi(G,[u]),X.updateButtonUi(D,[v]),void i.ui.chat.render(c.config().chatConfig))})}};return{init:h}}),require(["app"],function(a){a.init()});